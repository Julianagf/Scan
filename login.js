function wpMangaSubmitSwitch(){jQuery(".g-recaptcha-response").each((function(){var e=jQuery(this).parents("form").find('input[type="submit"]');""!==jQuery(this).val()?e.prop("disabled",!1):e.prop("disabled",!0)}))}jQuery(document).ready((function(e){var a='<div class="modal-loading-screen"><div class="fa-5x"><i class="fas fa-spinner fa-spin"></i></div></div>';e(".modal form").each((function(){if(0!==e(this).find(".g-recaptcha").length){var a=e(this).find('input[type="submit"]');void 0!==a&&a.prop("disabled",!0)}}));var n=e("#form-login .g-recaptcha, #form-sign-up .g-recaptcha, #form-reset .g-recaptcha");n&&(n.attr("data-callback","wpMangaSubmitSwitch"),n.attr("data-expired-callback","wpMangaSubmitSwitch"),n.attr("data-error","wpMangaSubmitSwitch")),e(document).on("click",'form#registerform input[name="wp-submit"]',(function(n){n.preventDefault();var t=e("#registerform input[name='user_sign-up']").val(),s=e("#registerform input[name='pass_sign-up']").val(),o=e("#registerform input[name='email_sign-up']").val(),r=e("#registerform .g-recaptcha-response").val(),i=e(this).parents(".modal-content");return""==t?(e("p.message.register").text(wpMangaLogin.messages.username_cannot_empty),!1):""==o?(e("p.message.register").text(wpMangaLogin.messages.email_cannot_empty),!1):""==s?(e("p.message.register").text(wpMangaLogin.messages.password_cannot_empty),!1):(jQuery.ajax({url:wpMangaLogin.admin_ajax,type:"POST",data:{action:"wp_manga_signup",user_login:t,user_pass:s,user_email:o,"g-recaptcha-response":r,nonce:wpMangaLogin.nonce},beforeSend:function(){i.append(a)},success:function(a){a.success?(e(document).trigger("madara_signup_successful"),e("form#registerform").remove(),e("p.message.register").html(a.data)):(e("p.message.register").html(a.data),e("#loginform .g-recaptcha-response").length>0&&grecaptcha.reset())},complete:function(){var e=i.find(".modal-loading-screen");void 0!==e&&e.remove()}}),!1)})),e(document).on("click",'form#loginform input[name="wp-submit"]',(function(n){if(n.preventDefault(),!e("body").hasClass("logged-in")){var t=e("#loginform input[name='log']").val(),s=e("#loginform input[name='pwd']").val(),o=e("#loginform input[name='rememberme']").val(),r=e('input[name="bookmarking"]').val(),i=e(".c-modal_item"),m=e("#loginform .g-recaptcha-response").val(),c=e(this).parents(".modal-content");return""==t?(e("p.message.login").text(wpMangaLogin.messages.please_enter_username),!1):""==s?(e("p.message.login").text(wpMangaLogin.messages.please_enter_password),!1):(jQuery.ajax({url:wpMangaLogin.admin_ajax,type:"POST",data:{action:"wp_manga_signin",login:t,pass:s,rememberme:o,"g-recaptcha-response":m,nonce:wpMangaLogin.nonce},beforeSend:function(){c.append(a)},success:function(a){if(1==a.success){if(e(".modal#form-login").modal("hide"),e(document).trigger("manga-login-success"),e("body").addClass("logged-in"),"undefined"!=typeof madara_ajax_maybe_buy_content&&(madara_ajax_maybe_buy_content.token=a.data.token),0!=i.length)var n=i.html();jQuery.ajax({type:"POST",url:wpMangaLogin.admin_ajax,data:{action:"wp-manga-get-user-section"},beforeSend:function(){i.html('<i class="fas fa-spinner fa-spin"></i>')},success:function(e){e.success?(i.empty(),i.append(e.data)):void 0!==n&&i.html(n)}}),1==r&&e(".wp-manga-action-button").trigger("click")}else void 0!==a.data?(e("p.message.login").html(a.data),e("#loginform .g-recaptcha-response").length>0&&grecaptcha.reset()):(e("p.message.login").text(wpMangaLogin.messages.invalid_username_or_password),e("#loginform .g-recaptcha-response").length>0&&grecaptcha.reset())},complete:function(e,a){var n=c.find(".modal-loading-screen");void 0!==n&&n.remove(),"error"==a&&alert(wpMangaLogin.messages.server_error)}}),!1)}})),e(document).on("click",'form#resetform input[name="wp-submit"]',(function(n){n.preventDefault();var t=e('input[name="user_reset"]').val();if(""==t)return e("p.message.reset").text(wpMangaLogin.messages.username_or_email_cannot_be_empty),!1;var s=e(this).parents(".modal-content"),o=e("#resetform .g-recaptcha-response").val();jQuery.ajax({url:wpMangaLogin.admin_ajax,type:"POST",data:{action:"wp_manga_reset",user:t,nonce:wpMangaLogin.nonce,"g-recaptcha-response":o},beforeSend:function(){s.append(a)},success:function(a){a.success?(e("form#resetform").fadeOut(),e("p.message.reset").text(a.data),setInterval((function(){e("form#resetform").fadeIn(),e("p.message.reset").text("")}),1e4)):(e("p.message.reset").html(a.data),e("#resetform .g-recaptcha-response").length>0&&grecaptcha.reset())},complete:function(){var e=s.find(".modal-loading-screen");void 0!==e&&e.remove()}})})),e("#resetpasswordform").on("submit",(function(a){a.preventDefault();var n=e(this),t=n.find('input[name="pass_1"]').val(),s=n.find('input[name="pass_2"]').val(),o=n.find('input[name="user"]').val(),r=n.find('input[name="key"]').val(),i=e("#form-reset-password .message.reset-password"),m=n.parents(".modal-content");return""==t||""==s?(i.text(wpMangaLogin.messages.please_fill_all_fields),!1):t.length<12?(i.text(wpMangaLogin.messages.password_cannot_less_than_12),!1):t!==s?(i.text(wpMangaLogin.messages.password_doesnot_match),!1):void e.ajax({url:wpMangaLogin.admin_ajax,method:"POST",data:{action:"wp_manga_reset_password",user:o,new_password:window.btoa(t),key:r,nonce:wpMangaLogin.nonce},beforeSend:function(){m.append('<div class="modal-loading-screen"><div class="fa-5x"><i class="fas fa-spinner fa-spin"></i></div></div>')},success:function(e){e.success&&(i.text(e.data.message),n.find("input").remove(),setInterval((function(){n.remove()}),5e3))},complete:function(){m.find(".modal-loading-screen").remove()}})})),e(document).on("click",".to-login",(function(a){a.preventDefault(),e(".modal").modal("hide"),setTimeout((function(){e("#form-login").modal("show")}),500)})),e(document).on("click",".to-reset",(function(a){a.preventDefault(),e(".modal").modal("hide"),setTimeout((function(){e("#form-reset").modal("show")}),500)})),e(document).on("click",".backtoblog",(function(a){e(".modal").modal("hide")}))}));